<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vehicle Booking Platform</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --secondary: #3f37c9;
      --success: #4cc9f0;
      --danger: #f72585;
      --warning: #f8961e;
      --light: #f8f9fa;
      --dark: #212529;
      --gray: #6c757d;
      --light-gray: #e9ecef;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      padding: 20px;
      color: var(--dark);
      line-height: 1.6;
    }
    
    .container {
      background: white;
      width: 100%;
      max-width: 600px;
      margin: 20px auto;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 8px;
      background: linear-gradient(90deg, var(--primary), var(--success));
    }
    
    h1, h2, h3 {
      text-align: center;
      margin-bottom: 20px;
      color: var(--primary);
    }
    
    h1 {
      font-size: 28px;
      font-weight: 600;
    }
    
    h2 {
      font-size: 24px;
      font-weight: 500;
    }
    
    h3 {
      font-size: 20px;
      font-weight: 500;
    }
    
    .btn {
      display: inline-block;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
      width: 100%;
      margin-top: 20px;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background: var(--secondary);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
    }
    
    .btn-secondary {
      background: var(--gray);
      color: white;
    }
    
    .btn-secondary:hover {
      background: #5a6268;
      transform: translateY(-2px);
    }
    
    .btn-success {
      background: var(--success);
      color: white;
    }
    
    .btn-success:hover {
      background: #3aa8d4;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(76, 201, 240, 0.4);
    }
    
    .btn-danger {
      background: var(--danger);
      color: white;
    }
    
    .btn-danger:hover {
      background: #d11a4a;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(247, 37, 133, 0.3);
    }
    
    /* Vehicle Cards */
    .vehicle-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      border: 1px solid var(--light-gray);
      transition: all 0.3s;
    }
    
    .vehicle-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .vehicle-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .vehicle-avatar {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 15px;
      border: 3px solid var(--light-gray);
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .vehicle-avatar:hover {
      transform: scale(1.05);
      border-color: var(--primary);
    }
    
    .vehicle-title {
      font-size: 18px;
      margin: 0;
      color: var(--dark);
      font-weight: 600;
    }
    
    .vehicle-subtitle {
      font-size: 14px;
      margin: 5px 0 0;
      color: var(--gray);
    }
    
    .vehicle-type {
      background: var(--primary);
      color: white;
      padding: 3px 10px;
      border-radius: 10px;
      font-size: 12px;
      font-weight: 500;
      display: inline-block;
      margin-top: 5px;
    }
    
    .vehicle-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 15px;
    }
    
    .detail-item {
      margin-bottom: 10px;
    }
    
    .detail-label {
      font-size: 12px;
      color: var(--gray);
      margin-bottom: 5px;
      font-weight: 500;
    }
    
    .detail-value {
      font-size: 14px;
      color: var(--dark);
      font-weight: 500;
    }
    
    .vehicle-images {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }
    
    .vehicle-image {
      width: calc(50% - 5px);
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid var(--light-gray);
    }
    
    .vehicle-image:hover {
      transform: scale(1.02);
      border-color: var(--primary);
    }
    
    .no-entries {
      text-align: center;
      padding: 40px 20px;
      color: var(--gray);
      font-size: 16px;
    }
    
    .entry-count {
      text-align: center;
      margin: 10px 0 20px;
      color: var(--gray);
      font-size: 14px;
    }
    
    .entry-type-filter {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 25px;
    }
    
    .filter-btn {
      padding: 8px 16px;
      background: var(--light-gray);
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .filter-btn:hover {
      transform: translateY(-2px);
    }
    
    .filter-btn.active {
      background: var(--primary);
      color: white;
      box-shadow: 0 3px 10px rgba(67, 97, 238, 0.3);
    }
    
    /* Booking Success Page */
    #booking-success-page {
      display: none;
      text-align: center;
      padding: 30px;
    }
    
    .booking-success-icon {
      font-size: 80px;
      color: var(--success);
      margin-bottom: 20px;
      animation: bounce 1s;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
      40% {transform: translateY(-20px);}
      60% {transform: translateY(-10px);}
    }
    
    .booking-success-message {
      font-size: 18px;
      margin-bottom: 30px;
      color: var(--dark);
      line-height: 1.6;
    }
    
    /* Image Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.9);
      overflow: auto;
    }
    
    .modal-content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100%;
      width: 100%;
      padding: 20px;
      box-sizing: border-box;
    }
    
    .modal-image {
      max-width: 90%;
      max-height: 70vh;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    }
    
    .close {
      position: absolute;
      top: 25px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .close:hover {
      color: var(--danger);
      transform: rotate(90deg);
    }
    
    .modal-nav {
      display: flex;
      justify-content: space-between;
      width: 90%;
      margin-top: 20px;
    }
    
    .nav-btn {
      color: white;
      font-size: 30px;
      cursor: pointer;
      padding: 10px 20px;
      background: rgba(0,0,0,0.5);
      border-radius: 5px;
      transition: all 0.3s;
    }
    
    .nav-btn:hover {
      background: rgba(0,0,0,0.7);
      transform: scale(1.1);
    }
    
    /* Booking modal styles */
    #booking-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      overflow: auto;
    }
    
    .booking-modal-content {
      background-color: white;
      margin: 10% auto;
      padding: 25px;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      animation: modalFadeIn 0.3s;
    }
    
    @keyframes modalFadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .booking-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--light-gray);
    }
    
    .booking-modal-title {
      font-size: 22px;
      font-weight: 600;
      color: var(--dark);
    }
    
    .booking-modal-close {
      color: var(--gray);
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .booking-modal-close:hover {
      color: var(--danger);
      transform: rotate(90deg);
    }
    
    .booking-form-group {
      margin-bottom: 20px;
    }
    
    .booking-form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--dark);
    }
    
    .booking-form-group input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid var(--light-gray);
      border-radius: 8px;
      font-size: 15px;
      transition: all 0.3s;
    }
    
    .booking-form-group input:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }
    
    .booking-modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 15px;
      margin-top: 25px;
      padding-top: 15px;
      border-top: 1px solid var(--light-gray);
    }
    
    .booking-modal-btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .booking-modal-btn-cancel {
      background-color: var(--light-gray);
      color: var(--dark);
    }
    
    .booking-modal-btn-confirm {
      background-color: var(--success);
      color: white;
    }
    
    .booking-modal-btn-cancel:hover {
      background-color: #e2e2e2;
      transform: translateY(-2px);
    }
    
    .booking-modal-btn-confirm:hover {
      background-color: #3aa8d4;
      transform: translateY(-2px);
      box-shadow: 0 3px 10px rgba(76, 201, 240, 0.3);
    }
    
    /* Alert Styles */
    .alert {
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-size: 14px;
      display: none;
      border-left: 4px solid transparent;
    }
    
    .alert-success {
      background: rgba(76, 201, 240, 0.1);
      border-left-color: var(--success);
      color: var(--dark);
    }
    
    .alert-danger {
      background: rgba(247, 37, 133, 0.1);
      border-left-color: var(--danger);
      color: var(--dark);
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }
      
      h1 {
        font-size: 24px;
      }
      
      h2 {
        font-size: 20px;
      }
      
      .vehicle-details {
        grid-template-columns: 1fr;
      }
      
      .vehicle-image {
        width: 100%;
      }
      
      .modal-image {
        max-width: 95%;
        max-height: 60vh;
      }
      
      .close {
        top: 15px;
        right: 25px;
        font-size: 35px;
      }
      
      .booking-modal-content {
        margin: 15% auto;
        width: 90%;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      .container {
        padding: 15px;
      }
      
      .vehicle-avatar {
        width: 60px;
        height: 60px;
      }
      
      .btn {
        padding: 10px 15px;
        font-size: 15px;
      }
      
      .booking-modal-btn {
        padding: 10px 15px;
      }
    }
  </style>
</head>
<body>

<div class="container" id="view-page">
  <h2>Available Vehicles</h2>
  
  <div class="entry-count" id="entry-count"></div>
  
  <div class="entry-type-filter">
    <button class="filter-btn active" data-type="all" onclick="filterEntries('all')">All Vehicles</button>
    <button class="filter-btn" data-type="bike" onclick="filterEntries('bike')"><i class="fas fa-motorcycle"></i> Bikes</button>
    <button class="filter-btn" data-type="car" onclick="filterEntries('car')"><i class="fas fa-car"></i> Cars</button>
    <button class="filter-btn" data-type="auto" onclick="filterEntries('auto')"><i class="fas fa-rickshaw"></i> Autos</button>
    <button class="filter-btn" data-type="bus" onclick="filterEntries('bus')"><i class="fas fa-bus"></i> Buses</button>
  </div>
  
  <div id="vehicle-entries">
    <div class="no-entries">No vehicles available yet. Please check back later.</div>
  </div>
  
  <button class="btn btn-danger" onclick="deleteAllData()" style="margin-top: 30px;">
    <i class="fas fa-trash-alt"></i> Delete All Stored Data
  </button>
</div>

<!-- Booking Success Page -->
<div class="container" id="booking-success-page" style="display: none;">
  <div class="booking-success-icon">
    <i class="fas fa-check-circle"></i>
  </div>
  <h2>Booking Confirmed!</h2>
  <p class="booking-success-message">
    Your vehicle booking has been successfully confirmed.<br>
    Details have been sent to your email address.
  </p>
  <button class="btn btn-primary" onclick="window.location.reload()">
    <i class="fas fa-list"></i> View All Vehicles
  </button>
</div>

<!-- Image Modal -->
<div id="imageModal" class="modal">
  <span class="close" onclick="closeModal()">&times;</span>
  <div class="modal-content">
    <img id="modalImage" class="modal-image">
    <div class="modal-nav">
      <span class="nav-btn" onclick="navigateImage(-1)"><i class="fas fa-chevron-left"></i></span>
      <span class="nav-btn" onclick="navigateImage(1)"><i class="fas fa-chevron-right"></i></span>
    </div>
  </div>
</div>

<!-- Booking Modal -->
<div id="booking-modal" class="modal">
  <div class="booking-modal-content">
    <div class="booking-modal-header">
      <div class="booking-modal-title">Book This Vehicle</div>
      <span class="booking-modal-close" onclick="closeBookingModal()">&times;</span>
    </div>
    <div id="booking-vehicle-info"></div>
    <div class="booking-form-group">
      <label for="booking-name"><i class="fas fa-user"></i> Your Name</label>
      <input type="text" id="booking-name" required placeholder="Enter your full name">
    </div>
    <div class="booking-form-group">
      <label for="booking-phone"><i class="fas fa-phone"></i> Mobile Number</label>
      <input type="tel" id="booking-phone" required placeholder="Enter 10-digit mobile number">
    </div>
    <div class="booking-form-group">
      <label for="booking-email"><i class="fas fa-envelope"></i> Email Address</label>
      <input type="email" id="booking-email" required placeholder="Enter your email address">
    </div>
    <div class="booking-form-group">
      <label for="booking-notes"><i class="fas fa-sticky-note"></i> Special Instructions (Optional)</label>
      <input type="text" id="booking-notes" placeholder="Any special requests or notes">
    </div>
    <div class="alert alert-danger" id="booking-alert" style="display: none;"></div>
    <div class="booking-modal-footer">
      <button class="booking-modal-btn booking-modal-btn-cancel" onclick="closeBookingModal()">
        <i class="fas fa-times"></i> Cancel
      </button>
      <button class="booking-modal-btn booking-modal-btn-confirm" onclick="confirmBooking()">
        <i class="fas fa-check"></i> Confirm Booking
      </button>
    </div>
  </div>
</div>

<script>
  let vehicleEntries = [];
  let currentImageIndex = 0;
  let currentImages = [];
  let currentlyBookingId = null;
  
  document.addEventListener('DOMContentLoaded', function() {
    const savedEntries = localStorage.getItem('vehicleEntries');
    if (savedEntries) {
      vehicleEntries = JSON.parse(savedEntries);
      updateViewPage();
    }
  });

  function updateViewPage(filterType = 'all') {
    const entriesContainer = document.getElementById('vehicle-entries');
    entriesContainer.innerHTML = '';
    
    const filteredEntries = filterType === 'all' 
      ? vehicleEntries 
      : vehicleEntries.filter(entry => entry.type === filterType);
    
    document.getElementById('entry-count').textContent = 
      `Showing ${filteredEntries.length} ${filteredEntries.length === 1 ? 'vehicle' : 'vehicles'}`;
    
    if (filteredEntries.length === 0) {
      entriesContainer.innerHTML = '<div class="no-entries">No vehicles found matching your selection</div>';
      return;
    }
    
    filteredEntries.forEach(entry => {
      const card = document.createElement('div');
      card.className = 'vehicle-card';
      
      // Format date for display
      const formattedDate = new Date(entry.date).toLocaleDateString('en-US', {
        weekday: 'short',
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      });
      
      card.innerHTML = `
        <div class="vehicle-header">
          <img src="${entry.profilePhoto}" class="vehicle-avatar" onclick="openImageModal('${entry.profilePhoto}')">
          <div>
            <h3 class="vehicle-title">${entry.name}</h3>
            <p class="vehicle-subtitle">${entry.vehicleName} (${entry.vehicleNumber})</p>
            <span class="vehicle-type" style="background: ${getColorForType(entry.type)}">
              <i class="${getIconForType(entry.type)}"></i> ${entry.type.charAt(0).toUpperCase() + entry.type.slice(1)}
            </span>
          </div>
        </div>
        <div class="vehicle-details">
          <div class="detail-item">
            <div class="detail-label"><i class="fas fa-phone"></i> Mobile</div>
            <div class="detail-value"><a href="tel:${entry.mobile}">${entry.mobile}</a></div>
          </div>
          <div class="detail-item">
            <div class="detail-label"><i class="fas fa-envelope"></i> Email</div>
            <div class="detail-value"><a href="mailto:${entry.email}">${entry.email}</a></div>
          </div>
          <div class="detail-item">
            <div class="detail-label"><i class="fas fa-route"></i> Trip</div>
            <div class="detail-value">${entry.locationFrom} to ${entry.locationTo}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label"><i class="fas fa-calendar-alt"></i> Date & Time</div>
            <div class="detail-value">${formattedDate} at ${entry.time}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label"><i class="fas fa-id-card"></i> Aadhaar No.</div>
            <div class="detail-value">${entry.aadhaarNumber}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label"><i class="fas fa-clock"></i> Posted On</div>
            <div class="detail-value">${entry.submittedAt}</div>
          </div>
        </div>
        <div class="detail-item">
          <div class="detail-label"><i class="fas fa-id-card"></i> Aadhaar Card</div>
          <img src="${entry.aadhaarPhoto}" style="width: 100%; border-radius: 8px; margin-top: 5px; cursor: pointer;" 
               onclick="openImageModal('${entry.aadhaarPhoto}')">
        </div>
        <div class="detail-label" style="margin-top: 15px;"><i class="fas fa-images"></i> Vehicle Photos</div>
        <div class="vehicle-images">
          ${entry.photos.map(photo => `
            <img src="${photo}" class="vehicle-image" 
                 onclick="openImageModal('${photo}', ${JSON.stringify(entry.photos)})">
          `).join('')}
        </div>
        <button class="btn btn-success" onclick="openBookingModal(${entry.id})">
          <i class="fas fa-calendar-check"></i> Book This Vehicle
        </button>
      `;
      entriesContainer.appendChild(card);
    });
  }
  
  function getColorForType(type) {
    const colors = {
      bike: '#28a745',
      car: '#007bff',
      auto: '#ffc107',
      bus: '#dc3545'
    };
    return colors[type] || '#6c757d';
  }
  
  function getIconForType(type) {
    const icons = {
      bike: 'fas fa-motorcycle',
      car: 'fas fa-car',
      auto: 'fas fa-rickshaw',
      bus: 'fas fa-bus'
    };
    return icons[type] || 'fas fa-car';
  }
  
  function deleteAllData() {
    // Show confirmation dialog
    if (confirm("Are you sure you want to delete ALL stored data? This action cannot be undone!")) {
      // Clear localStorage
      localStorage.removeItem('vehicleEntries');
      
      // Clear the current array
      vehicleEntries = [];
      
      // Update the view
      updateViewPage();
      
      // Show success message
      const alertBox = document.createElement('div');
      alertBox.className = 'alert alert-success';
      alertBox.innerHTML = '<i class="fas fa-check-circle"></i> All data has been successfully deleted.';
      document.getElementById('view-page').prepend(alertBox);
      
      // Remove the alert after 3 seconds
      setTimeout(() => {
        alertBox.remove();
      }, 3000);
    }
  }
  
  function openBookingModal(vehicleId) {
    const vehicle = vehicleEntries.find(entry => entry.id === vehicleId);
    if (!vehicle) return;
    
    currentlyBookingId = vehicleId;
    
    // Format date for display
    const formattedDate = new Date(vehicle.date).toLocaleDateString('en-US', {
      weekday: 'short',
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
    
    document.getElementById('booking-vehicle-info').innerHTML = `
      <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <h3 style="margin: 0 0 10px; color: var(--dark);">
          <i class="${getIconForType(vehicle.type)}"></i> ${vehicle.vehicleName} (${vehicle.vehicleNumber})
        </h3>
        <p style="margin: 8px 0; color: var(--dark);">
          <i class="fas fa-user"></i> Driver: ${vehicle.name} (<a href="tel:${vehicle.mobile}">${vehicle.mobile}</a>)
        </p>
        <p style="margin: 8px 0; color: var(--dark);">
          <i class="fas fa-route"></i> Trip: ${vehicle.locationFrom} to ${vehicle.locationTo}
        </p>
        <p style="margin: 8px 0; color: var(--dark);">
          <i class="fas fa-calendar-alt"></i> Date: ${formattedDate} at ${vehicle.time}
        </p>
      </div>
    `;
    
    // Clear previous inputs and messages
    document.getElementById('booking-name').value = '';
    document.getElementById('booking-phone').value = '';
    document.getElementById('booking-email').value = '';
    document.getElementById('booking-notes').value = '';
    document.getElementById('booking-alert').style.display = 'none';
    
    document.getElementById('booking-modal').style.display = 'block';
  }
  
  function closeBookingModal() {
    document.getElementById('booking-modal').style.display = 'none';
    currentlyBookingId = null;
  }
  
  function confirmBooking() {
    const name = document.getElementById('booking-name').value.trim();
    const phone = document.getElementById('booking-phone').value.trim();
    const email = document.getElementById('booking-email').value.trim();
    const notes = document.getElementById('booking-notes').value.trim();
    const alertBox = document.getElementById('booking-alert');
    
    alertBox.style.display = 'none';
    
    // Validate inputs
    if (!name || !phone || !email) {
      alertBox.textContent = 'Please fill in all required fields';
      alertBox.style.display = 'block';
      return;
    }
    
    if (!/^\d{10}$/.test(phone)) {
      alertBox.textContent = 'Please enter a valid 10-digit mobile number';
      alertBox.style.display = 'block';
      return;
    }
    
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      alertBox.textContent = 'Please enter a valid email address';
      alertBox.style.display = 'block';
      return;
    }
    
    const vehicleIndex = vehicleEntries.findIndex(entry => entry.id === currentlyBookingId);
    if (vehicleIndex === -1) return;
    
    // Create booking object
    const booking = {
      id: Date.now(),
      customerName: name,
      customerPhone: phone,
      customerEmail: email,
      notes: notes,
      bookedAt: new Date().toLocaleString(),
      status: 'confirmed'
    };
    
    // Add booking to vehicle
    if (!vehicleEntries[vehicleIndex].bookings) {
      vehicleEntries[vehicleIndex].bookings = [];
    }
    vehicleEntries[vehicleIndex].bookings.push(booking);
    
    // Save to localStorage
    localStorage.setItem('vehicleEntries', JSON.stringify(vehicleEntries));
    
    // Send notifications (simulated)
    sendBookingNotifications(vehicleEntries[vehicleIndex], booking);
    
    // Close modal and show success page
    closeBookingModal();
    showBookingSuccessPage();
  }

  function showBookingSuccessPage() {
    document.getElementById('view-page').style.display = 'none';
    document.getElementById('booking-success-page').style.display = 'block';
  }
  
  function sendBookingNotifications(vehicle, booking) {
    console.log('=== Notification to Vehicle Owner ===');
    console.log(`To: ${vehicle.email}`);
    console.log(`Subject: New Booking for your ${vehicle.type}`);
    console.log(`Message: 
      Hello ${vehicle.name},
      
      You have a new booking for your ${vehicle.vehicleName} (${vehicle.vehicleNumber}).
      
      Booking Details:
      - Customer: ${booking.customerName}
      - Contact: ${booking.customerPhone}
      - Email: ${booking.customerEmail}
      - Trip: ${vehicle.locationFrom} to ${vehicle.locationTo}
      - Date: ${vehicle.date} at ${vehicle.time}
      ${booking.notes ? `- Notes: ${booking.notes}` : ''}
      
      Please contact the customer to confirm the booking details.
      
      Thank you,
      Vehicle Booking Team
    `);
    
    console.log('\n=== Notification to Customer ===');
    console.log(`To: ${booking.customerEmail}`);
    console.log(`Subject: Your Booking Confirmation`);
    console.log(`Message: 
      Dear ${booking.customerName},
      
      Thank you for booking with us. Here are your booking details:
      
      Vehicle Details:
      - Type: ${vehicle.type.charAt(0).toUpperCase() + vehicle.type.slice(1)}
      - Name: ${vehicle.vehicleName}
      - Number: ${vehicle.vehicleNumber}
      - Driver: ${vehicle.name}
      - Contact: ${vehicle.mobile}
      
      Trip Details:
      - From: ${vehicle.locationFrom}
      - To: ${vehicle.locationTo}
      - Date: ${vehicle.date}
      - Time: ${vehicle.time}
      
      ${booking.notes ? `Your Notes: ${booking.notes}` : ''}
      
      The driver will contact you shortly to confirm the pickup details.
      
      Thank you for choosing our service!
      
      Best regards,
      Vehicle Booking Team
    `);
  }
  
  function filterEntries(type) {
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.classList.toggle('active', btn.dataset.type === type);
    });
    updateViewPage(type);
  }
  
  function openImageModal(src, images = null) {
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    
    modal.style.display = "block";
    modalImg.src = src;
    
    if (images && images.length > 1) {
      currentImages = images;
      currentImageIndex = images.indexOf(src);
    } else {
      currentImages = [src];
      currentImageIndex = 0;
    }
  }
  
  function closeModal() {
    document.getElementById('imageModal').style.display = "none";
  }
  
  function navigateImage(direction) {
    currentImageIndex += direction;
    
    if (currentImageIndex >= currentImages.length) {
      currentImageIndex = 0;
    } else if (currentImageIndex < 0) {
      currentImageIndex = currentImages.length - 1;
    }
    
    document.getElementById('modalImage').src = currentImages[currentImageIndex];
  }
  
  window.onclick = function(event) {
    const modal = document.getElementById('imageModal');
    const bookingModal = document.getElementById('booking-modal');
    
    if (event.target == modal) {
      closeModal();
    }
    
    if (event.target == bookingModal) {
      closeBookingModal();
    }
  }
</script>
</body>
</html>